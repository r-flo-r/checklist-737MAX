<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>iFly 737 MAX 8 Checklist</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: #f0f0f0;
    padding: 20px;
  }
  .container {
    max-width: 900px;
    margin: 0 auto;
    background: #1e1e1e;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.5);
  }
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }
  h1 { margin:0; font-size:1.6rem; }
  h2 { margin-top:20px; margin-bottom:10px; font-size:1.3rem; }
  h3 { margin-top:10px; margin-bottom:5px; font-size:1.1rem; color:#aaa; font-style:italic; }
  button {
    padding: 6px 12px;
    border-radius: 8px;
    border:1px solid #888;
    background:#333;
    color:#f0f0f0;
    cursor:pointer;
  }
  button:hover { background:#444; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
  th, td { text-align:left; padding:6px; }
  th { border-bottom:1px solid #555; }
  tr { border-bottom:1px solid #333; }
  input[type="checkbox"] {
    width:35px; height:35px; cursor:pointer;
    margin-right:10px;
  }
  td.item { width: 45%; }
  td.action { width: 45%; }
  td.checkbox { width: 10%; }
  tr.subsection td { text-align:center; font-style:italic; color:#ccc; border-bottom:none; }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>iFly 737 MAX 8 Checklist</h1>
    <button id="resetBtn">Reset</button>
  </div>
  <div id="checklist"></div>
</div>

<script>
(function(){
  // Checkliste mit Unter端berschriften
  const checklistData = [
    {section:"CLIMB", items:[
      ["ALTIMETER","SET STD"],
      ["--Passing 10000 ft--", ""],
      ["LANDING LIGHTS","OFF"],
      ["SEATBELTS SIGN","OFF"]
    ]},
    {section:"DESCEND", items:[
      ["ANTI-ICE","AS REQUIRED"],
      ["RECALL","CHECK"],
      ["LANDING ALT","SET"],
      ["APPROACH BRIEFING","COMPLETE"],
      ["--Passing TL--",""],
      ["ALTIMETER","LOCAL QNH"],
      ["--Below 10000 ft--",""],
      ["LANDING LIGHTS","ON"],
      ["SEATBELTS SIGN","ON"]
    ]}
    // Weitere Abschnitte hier analog hinzuf端gen
  ];

  const checklistEl = document.getElementById('checklist');
  const prefix = 'ifly737max8_subsections_';

  function buildChecklist() {
    checklistEl.innerHTML = '';
    checklistData.forEach((section,sIdx)=>{
      const h2 = document.createElement('h2');
      h2.textContent = section.section;
      checklistEl.appendChild(h2);
      const table = document.createElement('table');
      section.items.forEach((item,i)=>{
        const tr = document.createElement('tr');
        // Pr端fen auf Unter端berschrift
        if(item[0].startsWith('--') && item[0].endsWith('--')){
          tr.classList.add('subsection');
          const td = document.createElement('td');
          td.colSpan=3;
          td.textContent = item[0].replace(/--/g,'');
          tr.appendChild(td);
        } else {
          const tdCheckbox = document.createElement('td');
          tdCheckbox.classList.add('checkbox');
          const cb = document.createElement('input');
          cb.type='checkbox';
          const key = prefix+sIdx+'_'+i;
          if(localStorage.getItem(key)==='1') cb.checked=true;
          cb.addEventListener('change',()=>{
            if(cb.checked) localStorage.setItem(key,'1');
            else localStorage.removeItem(key);
          });
          tdCheckbox.appendChild(cb);
          const tdItem = document.createElement('td');
          tdItem.classList.add('item');
          tdItem.textContent = item[0];
          const tdAction = document.createElement('td');
          tdAction.classList.add('action');
          tdAction.textContent = item[1];
          tr.appendChild(tdCheckbox);
          tr.appendChild(tdItem);
          tr.appendChild(tdAction);
        }
        table.appendChild(tr);
      });
      checklistEl.appendChild(table);
    });
  }

  document.getElementById('resetBtn').addEventListener('click',()=>{
    checklistData.forEach((section,sIdx)=>{
      section.items.forEach((_,i)=>{
        localStorage.removeItem(prefix+sIdx+'_'+i);
      });
    });
    checklistEl.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=false);
  });

  if(document.readyState!=='loading') buildChecklist();
  else document.addEventListener('DOMContentLoaded',buildChecklist);

})();
</script>
</body>
</html>
